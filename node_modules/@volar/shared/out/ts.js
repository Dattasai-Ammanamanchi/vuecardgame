"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createTsLanguageService = void 0;
function createTsLanguageService(ts, ShPlugin, _host) {
    var _a, _b;
    // @ts-ignore
    const importSuggestionsCache = (_b = (_a = ts.Completions) === null || _a === void 0 ? void 0 : _a.createImportSuggestionsForFileCache) === null || _b === void 0 ? void 0 : _b.call(_a);
    const host = {
        ..._host,
        // @ts-ignore
        // TODO: crash on 'addListener' from 'node:process', reuse because TS has same problem
        getImportSuggestionsCache: () => importSuggestionsCache,
    };
    const shPlugin = ShPlugin({ typescript: ts });
    let languageService = ts.createLanguageService(host);
    languageService = shPlugin.decorate(languageService);
    return languageService;
}
exports.createTsLanguageService = createTsLanguageService;
//# sourceMappingURL=ts.js.map